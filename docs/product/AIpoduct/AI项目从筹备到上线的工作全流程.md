# AI项目从筹备到上线的工作全流程

![流程图](/AIproduct.png)

## 1.**定义产品需求**
    

明确做这个项目/功能的背景、价值、以及预期目标

工作内容：与业务方沟通，讨论项目的背景，决策业务的预期目标，模型提供方式（离线模型、实时接口）、模型覆盖率、期望上线时间等。

注意事项：

- 上述沟通细节和讨论确定的信息，需要记录到完整的PRD文档里面。后续可追溯源头。
    
- 模型提供方式，可通过实时接口（kafuka）提供。但是实时接口对算力要求更高，需要考虑成本
    
- 期望上线时间，可以先记录业务方提出的需求。但是最终时间的确认需要产品经理和算法团队沟通。产品经理应在与开发的日常沟通中积累经验，争取可通过业务需求，对开发工作量做大致评估，减少反复确认的时间。
    

  

## 2. **模型预研**
    

工作内容：

- 模型：评估历史的模型或算法技术是否可以直接复用
    
- 数据：评估历史积累的数据是否足够
    
- 需求调整：根据算法的评估，对需求内容进行调整
    

注意事项：

- 如果算法评估结果与业务方需求有分歧，可以重新沟通。
    
- 需求调整是一个复杂的事情，一开始承诺好的需求结果实现不了，解释成本非常高。
    
- 产品经理应尽可能在与业务方初步沟通的阶段，把需求细节定义清楚。提前把技术问题暴露出来做讨论，避免沦为传话筒，在业务与技术同学之间传话。
    

  

## 3.  **数据准备**
    

工作内容：

- 根据模型预研模型的结果以及业务的实际情况，帮助算法同学准备数据。
    

注意事项：

- AI产品经理对业务要有深刻理解，清楚知道应该提供什么样的数据集。也可提供一些业务信息用于提高算法认知。
    

  **数据获取方式：**

- **部门内部数据**：如订单数据、访问日志等，可以直接从数仓中获取。部分未留存的数据**可以增设埋点**
    
- **集团中台数据**：其他部门的业务数据，或统一的中台数据，根据公司数据管理规范，按流程申请提取
    
- **获取外采数据**：在公司内部数据不足以满足建模要求的时候，可以考虑购买外部公司数据。 要注意合规的风险。
    

## 4.  **模型构建**
    
模型构建流程：包括模型设计、特征工程、模型训练、模型验证、模型部署
    
1. **模型设计：**
        
    目标变量定义：针对业务方提出的需求或指标，做出具体的规则定义，**需有客观数据分析支持**算法技术选择：根据业务问题的性质，协助算法同学选择合适的机器学习算法
        
    
1.  **特征工程：**
    
    特征工程(Feature Engineering): 对一个模型来说，因为它的输入一定得是数量化的信矩阵等其他形式来表示的信息。所以，当需要利用一些字符串或者其他息，即用数字、向量、类型的数据时，我们也一定要把它们先转换成数量化的信息（计算机不能直接处理文字）。这种把信息表示成一个数量化信息的过程，就叫做特征工程。
        
    1. 提供足够多的样本数据，明确可以很好描述样本数据的特征，让机器去不断学习样本和各种特征之间的“关系”，从而在面对未知数据时能做出正确的预测。
            
    2. 预处理和特征提取是最核心的
            
    3. 数据和特征决定了机器学习的上限，模型和算法只是逼近这个上限
            
    4. 建立特征工程的流程：**1.数据清洗——2.特征提取——3.特征筛选**
            
1. ######   数据清洗
    

     数据清洗：通过对数据进行预处理，解决这些数据可能存在的数据缺失、有异常值、数据分布不均匀、量纲不一致等问题。

    - 数据缺失：通过过删除缺失值或者补充缺失值的手段来解决
     - 数据异常：对数据修正，或者直接丢弃
    - 数据不均衡：通过修改权重
    - 量纲不一致：通过归一化让他们的数据单位统一

> 公式：归一化值=（原始值-最小值）/（最大值-最小值）
> 
> 归一化后的数值在0-1之间


 4. ######   特征提取

	特征提取指在预处理好的数据中进行特征的提取，包含：
	
	- 数值型特征数据：例如用户最近一年的消费金额、用电量等
	    
	- 标签或描述类数据：样本包含分类特性的，例如性别[0女性，1男性]、已购房[0否,1是]
	    
	- 非结构化数据：例如用户文字评论、客服投诉内容等
    

1. ######   特征选择
    
      特征选择指排除掉不重要的特征，留下重要特征。
    
    - 计算特征的覆盖度，使用信息增益、相关性等指标评估
        
    - 根据这些指标的绝对值，或按照历史经验，对特征进行筛选
        
    - 排除掉稳定性差的特征
        
    

1. ######    模型训练
    

	模型训练指通过不断训练、验证和调优，让模型达到最优的一个过程

    7. ###### 模型部署
    

	模型训练完成后，需由算法工程师部署到线上。一般情况下，算法模型是部署为独立的服务，通过暴露API接口给工程团队进行调用，实现模型与应用端之间的互相解耦，实现高效协作。

## **5. 模型验收评估**
    

**模型评估验收：模型构建完成后，就需要对模型进行评估验收，从产品经理的角度去评判模型效果是否满足上线的标准。在不同的应用场景下，需要使用不同的评价指标来衡量模型效果。**

1. **混淆矩阵：**
    
      定义：表明多个类别之间是否有混淆，用来判断模型到底判断对了多少个
    
      假如我们预测一个二分类问题，我们的结果就是负类、正类。以电商平台对流失用户推送挽留消息作为案例，流失用户就是正类positive，普通用户就是负类negative。
    
    - 如果真实值是正类，模型预测是正类，称之为ture positive
        
    - 如果真实值是负类，模型预测是负类，称之为ture negative
        
    - 如果真实值是正类，模型预测是负类，称之为false negative
        
    - 如果真实值是负类，模型预测是正类，称之为false positive
        
        |   |   |   |
        |---|---|---|
        ||预测positive=320|预测negative=180|
        |实际positive=360|TP=283  <br>真流失|FN=77  <br>假普通用户|
        |实际negative=140|FP=37  <br>假流失|TN=103  <br>真普通用户|
        
    

2. **准确率、精确率、召回率**
    
- **准确率：**从**全局的角度**判断**模型正确分类**的能力，模型预测正确的人数占全部用户的比例
        
    但是单独依靠准确率是远远不够的。有些场景的数据训练集存在分布不均的情况，会导致准确率指标不能客观评价模型效果
        
            Accuracy=(TP+TN)/（TP+TN+FP+FN）
        
    

- **精确率**：判断模型识别出来的结果有多精确的指标。在上述电商案例里就是要看模型预测的真正流失用户占全部流失用户的比例。**模型预测为positive的数据中实际也是positive的占比**
    
        Precision=TP/(TP+FP)
    

- **召回率**：判断模型识别广度的指标。**实际值是positive的数据中有多少被模型预测为positive**
    Recall=TP/(TP+FN)

  

3. 各个评价指标的应用场景案例
    

**评价指标的选择**：实际工作评估一般用精确率和召回率。精确率和召回率是一对矛盾的指标。作为AI产品经理要根据业务的实际情况做这些评估，考虑应重点参考精确率、召回率还是准确率。


| **应用场景**                   | **重点关注指标**        | **原因**                                                                                                                                                  |
| -------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 医疗诊断：疾病筛查模型                | 召回率               | 疾病筛查的目的就是尽可能找到阳性表现，及时干预治疗。所以应减少漏诊                                                                                                                       |
| 信用卡审批：银行信用卡审批模型            | 精确率               | 信用卡审批目的是评估用户是否符合审批条件。若将不合格用户（negative）误判为合格（positive），可能会导致金融欺诈风险。<br><br>所以识别为合格的用户应确保大概率是合格的。一般来说会申请信用卡的人多数是合格的，若将合格的误判为不合格，可通过人工复核等方式减少客户投诉或体验不佳的问题。 |
| 刷脸支付                       | 精确率               | 刷脸支付多用在数据安全验证中，若出现误判，会导致用户隐私信息泄露或财产安全问题。所以应该追求预测的精准度。确保“识别是本人（positive）”的时候大概率是本人。                                                                      |
| 产品质量检测系统                   | 根据产品特性综合考虑召回率和精确率 | 在制造行业的产品质量检测中，召回率和精确率都很重要，但具体取决于产品的性质和风险。例如，在安全关键的产品（如汽车部件）中，高召回率至关重要，以确保所有潜在的不合格品被检测出来。但在一些较不严格的产品中，可能更注重精确率，以避免过多的合格产品被错误判定为不合格，导致生产效率低下。             |
| 汽车碰撞预防系统：汽车的安全系统，如自动紧急刹车系统 | 准确率               | 汽车碰撞预防系统：在汽车安全系统，如自动紧急刹车系统中，准确率通常是最重要的。这是因为系统的主要目标是正确地识别出真正的危险情况并作出反应，同时避免因误报而引发不必要的干预或潜在的新危险。因此，系统需要在召回率和精确率之间保持良好的平衡，确保既能检测到真正的威胁，又不会频繁误报             |

## **6. 工程开发和产品上线运营**

1. 工程开发：确认模型的输入输出，约定API接口

2. 测试验收：测试同学走查，开发同学配合修复bug（如有），产品经理做最后的验收

3. 上线运营：上线后，AI产品经理持续观测模型效果